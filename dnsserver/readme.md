# DNS Cache
Автор: Тощев Иван (toshchev.ivan@gmail.com)
## Описание
Асинхронный DNS сервер. Умеет читать записи типа SOA, A, AAAA, NS, PTR, MX, CNAME.
Работает по UDP (в т.ч. truncated), TCP, заполняет секцию additional по необходимости.

В папке `examples` примеры файлов зоны.

## Требования
Python версии не ниже 3.6

## AXFR
Умеет передавать лежащую в БД зону одним пакетом по TCP в любой момент при поступлении соответствующего запроса.
Умеет запрашивать и принимать зону при старте сервера (в т.ч. и в несколько пакетов) при указании ключа `--axfr`.
Параметр должен состоять из 4 разделённых пробелом значений: имя запрашиваемой зоны, IP адрес источника, порт источника и серийный номер SOA (если 0, то проверяться не будет).
При этом чтение записей из файла не производится, а записи заносятся напрямую в БД.

Трансфер работает в обоих направлениях с BIND и между двумя экземплярами программы. Обратите внимание, что, поскольку скрипт использует один и тот же файл БД, в таком случае нужно запускать два разных физических экземпляра в разных директориях.


## Использование

    python dns_server.py [-h] [-p PORT] [-f FILE] [-a ADDRESS] [--axfr AXFR AXFR AXFR AXFR] fqdn

`fqdn` - имя зоны, может не совпадать с реально записанной в файле зоной

`FILE` - путь к файлу с зоной (если не указан, то считается {fqdn}.dns)

`PORT` - прослушиваемый порт (по умолчанию, 53)

`ADDRESS` - последний октет локального адреса. Например, если параметр равен 2, сервер будет иметь адрес 127.0.0.2.
По умолчанию, 1.